<!DOCTYPE html>
<!-- saved from url=(0032)http://localhost/mefon/register/ -->
<html lang="en-CA" class="wf-robotocondensed-n7-active wf-creteround-n4-inactive wf-raleway-n4-inactive wf-active"
      style="overflow: scroll;"><!--<![endif]-->
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <link rel="shortcut icon" href="<?php echo base_url(); ?>assets/images/police.png">
    <link rel="stylesheet" href="<?php echo base_url(); ?>assets/css/regi_style.css">
    <link rel="stylesheet" href="<?php echo base_url(); ?>assets/MeFon – 5G Biometrics Security_files/font-awesome.min.css">
    <link type="text/css" media="all"
          href="<?php echo base_url(); ?>assets/MeFon – 5G Biometrics Security_files/autoptimize_8a8af5d154f09d20d47d3c52e4b25ec5.css"
          rel="stylesheet">
    <title>MeFon – 5G Biometrics Security</title>
    <link rel="dns-prefetch" href="http://s.w.org/">
    <link rel="alternate" type="application/rss+xml" title="MeFon » Feed" href="http://mefon.ca/feed/">
    <link rel="alternate" type="application/rss+xml" title="MeFon » Comments Feed"
          href="http://mefon.ca/comments/feed/">
    <script type="text/javascript">window._wpemojiSettings = {
            "baseUrl": "https:\/\/s.w.org\/images\/core\/emoji\/11\/72x72\/",
            "ext": ".png",
            "svgUrl": "https:\/\/s.w.org\/images\/core\/emoji\/11\/svg\/",
            "svgExt": ".svg",
            "source": {"concatemoji": "http:\/\/mefon.ca\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.9.8"}
        };
        !function (a, b, c) {
            function d(a, b) {
                var c = String.fromCharCode;
                l.clearRect(0, 0, k.width, k.height), l.fillText(c.apply(this, a), 0, 0);
                var d = k.toDataURL();
                l.clearRect(0, 0, k.width, k.height), l.fillText(c.apply(this, b), 0, 0);
                var e = k.toDataURL();
                return d === e
            }

            function e(a) {
                var b;
                if (!l || !l.fillText) return !1;
                switch (l.textBaseline = "top", l.font = "600 32px Arial", a) {
                    case"flag":
                        return !(b = d([55356, 56826, 55356, 56819], [55356, 56826, 8203, 55356, 56819])) && (b = d([55356, 57332, 56128, 56423, 56128, 56418, 56128, 56421, 56128, 56430, 56128, 56423, 56128, 56447], [55356, 57332, 8203, 56128, 56423, 8203, 56128, 56418, 8203, 56128, 56421, 8203, 56128, 56430, 8203, 56128, 56423, 8203, 56128, 56447]), !b);
                    case"emoji":
                        return b = d([55358, 56760, 9792, 65039], [55358, 56760, 8203, 9792, 65039]), !b
                }
                return !1
            }

            function f(a) {
                var c = b.createElement("script");
                c.src = a, c.defer = c.type = "text/javascript", b.getElementsByTagName("head")[0].appendChild(c)
            }

            var g, h, i, j, k = b.createElement("canvas"), l = k.getContext && k.getContext("2d");
            for (j = Array("flag", "emoji"), c.supports = {
                everything: !0,
                everythingExceptFlag: !0
            }, i = 0; i < j.length; i++) c.supports[j[i]] = e(j[i]), c.supports.everything = c.supports.everything && c.supports[j[i]], "flag" !== j[i] && (c.supports.everythingExceptFlag = c.supports.everythingExceptFlag && c.supports[j[i]]);
            c.supports.everythingExceptFlag = c.supports.everythingExceptFlag && !c.supports.flag, c.DOMReady = !1, c.readyCallback = function () {
                c.DOMReady = !0
            }, c.supports.everything || (h = function () {
                c.readyCallback()
            }, b.addEventListener ? (b.addEventListener("DOMContentLoaded", h, !1), a.addEventListener("load", h, !1)) : (a.attachEvent("onload", h), b.attachEvent("onreadystatechange", function () {
                "complete" === b.readyState && c.readyCallback()
            })), g = c.source || {}, g.concatemoji ? f(g.concatemoji) : g.wpemoji && g.twemoji && (f(g.twemoji), f(g.wpemoji)))
        }(window, document, window._wpemojiSettings);</script>
    <script src="<?php echo base_url(); ?>assets/MeFon – 5G Biometrics Security_files/wp-emoji-release.min.js.download" type="text/javascript"
            defer=""></script>
    <!--[if lt IE 10]>
    <link rel='stylesheet' id='twentysixteen-ie-css'
          href='http://mefon.ca/wp-content/themes/mefon/css/ie.css?ver=20160816' media='all'/> <![endif]-->
    <!--[if lt IE 9]>
    <link rel='stylesheet' id='twentysixteen-ie8-css'
          href='http://mefon.ca/wp-content/themes/mefon/css/ie8.css?ver=20160816' media='all'/> <![endif]-->
    <!--[if lt IE 8]>
    <link rel='stylesheet' id='twentysixteen-ie7-css'
          href='http://mefon.ca/wp-content/themes/mefon/css/ie7.css?ver=20160816' media='all'/> <![endif]-->
    <script src="<?php echo base_url(); ?>assets/MeFon – 5G Biometrics Security_files/jquery.js.download"></script>
    <!--[if lt IE 9]>
    <script src='http://mefon.ca/wp-content/themes/mefon/js/html5.js?ver=3.7.3'></script> <![endif]-->
    <link rel="https://api.w.org/" href="http://mefon.ca/wp-json/">
    <link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://mefon.ca/xmlrpc.php?rsd">
    <link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://mefon.ca/wp-includes/wlwmanifest.xml">
    <meta name="generator" content="WordPress 4.9.8">
    <link rel="shortlink" href="http://mefon.ca/">
    <link rel="alternate" type="application/json+oembed"
          href="http://mefon.ca/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fmefon.ca%2F">
    <link rel="alternate" type="text/xml+oembed"
          href="http://mefon.ca/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fmefon.ca%2F&amp;format=xml">
    <script type="text/javascript">var ultimatemember_image_upload_url = 'http://mefon.ca/wp-content/plugins/ultimate-member/core/lib/upload/um-image-upload.php';
        var ultimatemember_file_upload_url = 'http://mefon.ca/wp-content/plugins/ultimate-member/core/lib/upload/um-file-upload.php';
        var ultimatemember_ajax_url = 'http://mefon.ca/wp-admin/admin-ajax.php';</script>

    <!--    google address api-->
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCz3b9EpGPYdYCb1wAWx2ZRU7N9uqfQ5WQ&libraries=places&callback=initAutocomplete"
            async defer></script>
    <script src="<?php echo base_url(); ?>assets/js/address.js" type="text/javascript"></script>
    <script src="<?php echo base_url(); ?>assets/js/exif.js"></script>
    <script type="text/javascript" src="<?php echo base_url(); ?>assets/js/jquery.min.js"></script>
    <script src="<?php echo base_url(); ?>assets/js/autosize.js"></script>
</head>

<body>
<?php
$user_language=$_SESSION["language"];
$this->lang->load('content',$user_language);
?>



<form method="post" autocomplete="on" onsubmit="return validateForm()" action="<?php echo site_url('register/sms') ?>" enctype="multipart/form-data">
    <div class="container">



        <div class="um-col-1">

            <div style="clear: both;">
                <img id="user_iamge" onclick="show_image()" src="<?php echo base_url(); ?>assets/images/user.png">

                <br/>
                <div class="tooltip_image" >
                        <span class="match" id="image_check">
                        <div id='gif_check' style="padding:20px 20px 20px 20px;"></div>
                        </span>
                </div>
                <br/>
                <div id="image_desc">
                    <p><?=$this->lang->line('image_description1');?></p>
                    <p><?=$this->lang->line('image_description4');?></p>
                    <p><?=$this->lang->line('image_description2');?></p>
                    <p><?=$this->lang->line('image_description3');?></p>
                    <p><?=$this->lang->line('image_description5');?></p>
                </div>
                <div style="clear: both;">
                    <input type="file" name="image" id="file-1" class="inputfile1 inputfile inputfile-1" data-multiple-caption="{count} files selected" multiple="" size="20" hidden>
                    <label for="file-1"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="17" viewBox="0 0 20 17"><path d="M10 0l-5.2 4.9h3.3v5.1h3.8v-5.1h3.3l-5.2-4.9zm9.3 11.5l-3.2-2.1h-2l3.4 2.6h-3.5c-.1 0-.2.1-.2.1l-.8 2.3h-6l-.8-2.2c-.1-.1-.1-.2-.2-.2h-3.6l3.4-2.6h-2l-3.2 2.1c-.4.3-.7 1-.6 1.5l.6 3.1c.1.5.7.9 1.2.9h16.3c.6 0 1.1-.4 1.3-.9l.6-3.1c.1-.5-.2-1.2-.7-1.5z"></path></svg> <span class="um-req"><?=$this->lang->line('pro_image');?></span></label>

                    <p id="image_error" style="display: none;color: red"><?=$this->lang->line('image_invalid');?></p></div>
            </div>
            <button type="submit" class="regi_button"><?=$this->lang->line('register');?></button>
        </div>

    </div>
</form>


<div id="myModal_image" class="modal_image">
    <span class="close_image">&times;</span>
    <img class="modal-content-image" id="img01-image" >
</div>
<div id="loading_image" class="loading_image">
    <div class="gif_content">
        <img class="loading_gif" src="<?php echo base_url(); ?>assets/images/waiting.gif" id="loading" >
    </div>
</div>
<!--image tag manage-->
<script type="text/javascript">

    ( function ( document, window, index )
    {


        var image_error= document.getElementById("image_error");
        var inputs = document.querySelectorAll( '.inputfile1' );
        var image= document.getElementById("file-1");
        Array.prototype.forEach.call( inputs, function( input )
        {
            input.addEventListener( 'change', function( e )
            {
                var elem = document.getElementById("image_check");
                elem.style.visibility = 'hidden';
                var fileName = '';
                if( this.files && this.files.length > 1 )
                    fileName = ( this.getAttribute( 'data-multiple-caption' ) || '' ).replace( '{count}', this.files.length );
                else
                    fileName = e.target.value.split( '\\' ).pop();
                var preview = document.getElementById("user_iamge");
                var modal_image = document.getElementById("img01-image");
                preview.classList.remove("rotate");
                modal_image.classList.remove("rotate_modal");
                preview.classList.remove("rotate_right");
                modal_image.classList.remove("rotate_modal_right");
                preview.classList.remove("rotate_180");
                modal_image.classList.remove("rotate_modal_180");
                if( fileName ){
                    var file    = document.querySelector('input[type=file]').files[0];
                    var reader  = new FileReader();
                    reader.addEventListener("load", function () {
                        preview.src = reader.result;
                    }, false);
                    if (file) {
                        var gif=document.getElementById("loading_image");
                        gif.style.display = "block";
                        reader.readAsDataURL(file);
                        // image check
                        reader.onload = function (f) {
                            var user_image = $('#user_iamge');
                            user_image.load(function(){
                                square =300,   //定义画布的大小，也就是图片压缩之后的像素
                                    canvas = document.createElement('canvas'),
                                    context = canvas.getContext('2d'),
                                    imageWidth = 0,    //压缩图片的大小
                                    imageHeight = 0,
                                    offsetX = 0,
                                    offsetY = 0,
                                    data = '';

                                canvas.width = square;
                                canvas.height = square;
                                context.clearRect(0, 0, square, square);

                                if (this.width > this.height) {
                                    imageWidth = Math.round(square * this.width / this.height);
                                    imageHeight = square;
                                    offsetX = - Math.round((imageWidth - square) / 2);
                                } else {
                                    imageHeight = Math.round(square * this.height / this.width);
                                    imageWidth = square;
                                    offsetY = - Math.round((imageHeight - square) / 2);
                                }
                                context.drawImage(this, offsetX, offsetY, imageWidth, imageHeight);
                                var data = canvas.toDataURL('image/jpeg',3);
                                var data_image=data.split("base64,")[1];
                                $.ajax({
                                    url: "<?php echo site_url('register/send_file/')?>",
                                    type: 'POST',
                                    data:{
                                        "base64": data_image
                                    },
                                    dataType: 'json',
                                    success: function (data) {

                                        gif.style.display = "none";
                                        var exist=$.parseJSON(data).result;

                                        if(exist==false){
                                            $("#gif_check").html("<?=$this->lang->line('image_check_tooltip');?>");
                                            var elem = document.getElementById("image_check");
                                            elem.style.visibility = 'visible';
                                        }
                                        if(exist=='error'){
                                            $("#gif_check").html("<?=$this->lang->line('internet_error');?>");

                                            var elem = document.getElementById("image_check");
                                            elem.style.visibility = 'visible';
                                        }



                                    },
                                    error: function (jqXhr, textStatus, errorMessage) {
                                        <?php $error=$this->lang->line('internet_error');?>
                                        alert('<?=$error;?>');
                                        var elem = document.getElementById("image_check");
                                        elem.style.visibility = 'hidden';
                                        gif.style.display = "none";
                                    }
                                });
                                //压缩完成执行回调
                                callback(data);
                            });
                        };
                        reader.onerror = function (error) {
                            console.log('Error: ', error);
                        };
                        // end check image
                        EXIF.getData(file, function() {
                            // alert(EXIF.pretty(this));
                            EXIF.getAllTags(this);
                            var Orientation=EXIF.getTag(this, 'Orientation');

                            if(Orientation==6){

                                preview.classList.add("rotate");
                                modal_image.classList.add("rotate_modal");

                            }
                            if(Orientation==8){

                                preview.classList.add("rotate_right");
                                modal_image.classList.add("rotate_modal_right");

                            }
                            if(Orientation==3){

                                preview.classList.add("rotate_180");
                                modal_image.classList.add("rotate_modal_180");

                            }

                            return;


                        })
                    }

                    image_error.style.display = "none";
                }

                else
                    preview.src ="<?php echo base_url(); ?>assets/images/user.png";
                preview.classList.remove("rotate");
                modal_image.classList.remove("rotate_modal");

            });

            // Firefox bug fix
            input.addEventListener( 'focus', function(){ input.classList.add( 'has-focus' ); });
            input.addEventListener( 'blur', function(){ input.classList.remove( 'has-focus' ); });
        });
    }( document, window, 0 ));
</script>

</body></html>
